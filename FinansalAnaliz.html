<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yazılım Projesi Finansal Analiz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 90%;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            padding:10px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

            .header h1 {
                color: #2c3e50;
                font-size: 2.5em;
                margin-bottom: 10px;
                background: linear-gradient(135deg, #3498db, #9b59b6);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
            }

            .header p {
                color: #7f8c8d;
                font-size: 1.1em;
            }

        .input-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

            .section h2 {
                color: #2c3e50;
                margin-bottom: 20px;
                font-size: 1.4em;
                border-bottom: 2px solid #3498db;
                padding-bottom: 10px;
            }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: #2c3e50;
            font-weight: 600;
        }

        input, select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

            input:focus, select:focus {
                outline: none;
                border-color: #3498db;
                box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.1);
            }

        .btn {
            background: linear-gradient(135deg, #3498db, #2980b9);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
            margin-top: 10px;
        }

            .btn:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 20px rgba(52, 152, 219, 0.3);
            }

        .results {
            background: linear-gradient(135deg, #2c3e50, #34495e);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin-top: 30px;
            flex:1 auto;
        }

            .results h2 {
                text-align: center;
                margin-bottom: 30px;
                font-size: 2em;
            }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

            .metric-card h3 {
                font-size: 1.2em;
                margin-bottom: 10px;
                opacity: 0.9;
            }

        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .metric-description {
            opacity: 0.8;
            font-size: 0.9em;
        }

        .cash-flow-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            overflow: hidden;
        }

            .cash-flow-table th,
            .cash-flow-table td {
                padding: 12px;
                text-align: center;
                border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            }

            .cash-flow-table th {
                background: rgba(255, 255, 255, 0.1);
                font-weight: 600;
            }

        .positive {
            color: #2ecc71;
        }

        .negative {
            color: #e74c3c;
        }

        .neutral {
            color: #f39c12;
        }

        .explanation {
            background: #ecf0f1;
            padding: 25px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }

            .explanation h3 {
                color: #2c3e50;
                margin-bottom: 15px;
            }

            .explanation p {
                color: #34495e;
                line-height: 1.6;
                margin-bottom: 10px;
            }

        @media (max-width: 768px) {
            .input-grid {
                grid-template-columns: 1fr;
            }

            .metrics {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Yazılım Projesi Finansal Analiz Aracı</h1>
            <p>PoC tamamlanmış yazılım projeniz için NPV, IRR ve ROI hesaplamaları</p>
        </div>       
     
        <div style="display:flex">

            <div>
                <div class="input-grid">
                    <div class="section">
                        <h2>📊 Proje Bilgileri</h2>
                        <div class="form-group">
                            <label>Başlangıç Yatırımı (₺)</label>
                            <input type="number" id="initialInvestment" value="500000" placeholder="Örn: 500000">
                        </div>

                        <div class="form-group">
                            <label>İndirgeme Oranı (WACC) (%)</label>
                            <input type="number" id="discountRate" value="15" step="0.1" placeholder="Örn: 15">
                        </div>

                        <div class="form-group">
                            <label>Proje Süresi (Yıl)</label>
                            <select id="projectYears">
                                <option value="3">3 Yıl</option>
                                <option value="5" selected>5 Yıl</option>
                                <option value="7">7 Yıl</option>
                                <option value="10">10 Yıl</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Pazar Penetrasyon Modeli</label>
                            <select id="marketModel">
                                <option value="conservative">Muhafazakar</option>
                                <option value="moderate" selected>Orta</option>
                                <option value="aggressive">Agresif</option>
                            </select>
                        </div>
                    </div>

                    <div class="section">
                        <h2>💰 Gelir Parametreleri</h2>
                        <div class="form-group">
                            <label>İlk Yıl Gelir (₺)</label>
                            <input type="number" id="firstYearRevenue" value="1200000" placeholder="Örn: 120000">
                        </div>

                        <div class="form-group">
                            <label>Yıllık Gelir Artış Oranı (%)</label>
                            <input type="number" id="revenueGrowthRate" value="5" step="0.1" placeholder="Örn: 50">
                        </div>

                        <div class="form-group">
                            <label>Brüt Kar Marjı (%)</label>
                            <input type="number" id="grossMargin" value="50" step="0.1" placeholder="Örn: 75">
                        </div>

                        <div class="form-group">
                            <label>Aylık Sabit Giderler (₺)</label>
                            <input type="number" id="monthlyFixedCosts" value="30000" placeholder="Örn: 25000">
                        </div>

                        <div class="form-group">
                            <label>Yıllık Pazarlama Bütçesi (₺)</label>
                            <input type="number" id="marketingBudget" value="60000" placeholder="Örn: 80000">
                        </div>
                    </div>
                </div>

                <button class="btn" onclick="calculateMetrics()">📈 Finansal Analiz Yap</button>
            </div>
            <div id="results" class="results" style="display: none;">
                <h2>📊 Finansal Analiz Sonuçları</h2>

                <div class="metrics">
                    <div class="metric-card">
                        <h3>NPV (Net Bugünkü Değer)</h3>
                        <div class="metric-value" id="npvValue">-</div>
                        <div class="metric-description" id="npvDescription">Projenin bugünkü değeri</div>
                    </div>

                    <div class="metric-card">
                        <h3>IRR (İç Getiri Oranı)</h3>
                        <div class="metric-value" id="irrValue">-</div>
                        <div class="metric-description" id="irrDescription">Projenin getiri oranı</div>
                    </div>

                    <div class="metric-card">
                        <h3>ROI (Yatırım Getirisi)</h3>
                        <div class="metric-value" id="roiValue">-</div>
                        <div class="metric-description" id="roiDescription">Toplam yatırım getirisi</div>
                    </div>

                    <div class="metric-card">
                        <h3>Payback Period</h3>
                        <div class="metric-value" id="paybackValue">-</div>
                        <div class="metric-description">Yatırımın geri dönüş süresi</div>
                    </div>
                </div>

                <table class="cash-flow-table" id="cashFlowTable">
                    <thead>
                        <tr>
                            <th>Yıl</th>
                            <th>Gelir</th>
                            <th>Giderler</th>
                            <th>Net Nakit Akışı</th>
                            <th>İndirgeli Nakit Akışı</th>
                            <th>Kümülatif NPV</th>
                        </tr>
                    </thead>
                    <tbody id="cashFlowBody">
                    </tbody>
                </table>
            </div>
        </div>
        <div class="explanation">
            <h3>💡 Yazılım Projeleri İçin Önemli Notlar</h3>
            <p><strong>NPV (Net Present Value):</strong> Projenin bugünkü değerden toplam kârını gösterir. Pozitif NPV karlı proje anlamına gelir.</p>
            <p><strong>IRR (Internal Rate of Return):</strong> Projenin sağladığı getiri oranıdır. WACC'tan yüksek olması gerekir.</p>
            <p><strong>ROI (Return on Investment):</strong> Yatırılan her lira için ne kadar getiri elde edildiğini gösterir.</p>
            <p><strong>Yazılım Projesi Özellikleri:</strong> Yüksek başlangıç maliyeti, düşük marjinal maliyet, hızlı ölçeklenme potansiyeli</p>

            <div class="grid-cols-1 grid gap-2.5 [&amp;_>_*]:min-w-0">
                <p class="whitespace-normal break-words">Bu araç yazılım projeniz için kapsamlı finansal analiz sağlar. İşte bu hesaplamaların yazılım projeleri açısından önemli noktaları:</p>
                <h2 class="text-xl font-bold text-text-100 mt-1 -mb-0.5">Yazılım Projelerinde Özel Durumlar</h2>
                <p class="whitespace-normal break-words"><strong>1. Gelir Modeli Çeşitliliği</strong></p>
                <ul class="[&amp;:not(:last-child)_ul]:pb-1 [&amp;:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7">
                    <li class="whitespace-normal break-words">SaaS abonelik modeli (tekrarlayan gelir)</li>
                    <li class="whitespace-normal break-words">Lisans satışları (tek seferlik)</li>
                    <li class="whitespace-normal break-words">Freemium model (dönüşüm oranları)</li>
                    <li class="whitespace-normal break-words">API kullanım ücretleri</li>
                </ul>
                <p class="whitespace-normal break-words"><strong>2. Maliyet Yapısı Özellikleri</strong></p>
                <ul class="[&amp;:not(:last-child)_ul]:pb-1 [&amp;:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7">
                    <li class="whitespace-normal break-words">Yüksek başlangıç geliştirme maliyeti</li>
                    <li class="whitespace-normal break-words">Düşük marjinal maliyet (ölçeklendirme avantajı)</li>
                    <li class="whitespace-normal break-words">Sürekli R&amp;D yatırımı gereksinimi</li>
                    <li class="whitespace-normal break-words">Bulut altyapı maliyetleri</li>
                </ul>
                <p class="whitespace-normal break-words"><strong>3. Risk Faktörleri</strong></p>
                <ul class="[&amp;:not(:last-child)_ul]:pb-1 [&amp;:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7">
                    <li class="whitespace-normal break-words">Teknoloji eskime riski</li>
                    <li class="whitespace-normal break-words">Rekabet yoğunluğu</li>
                    <li class="whitespace-normal break-words">Müşteri kazanma maliyeti (CAC)</li>
                    <li class="whitespace-normal break-words">Müşteri yaşam boyu değeri (LTV)</li>
                </ul>
                <h2 class="text-xl font-bold text-text-100 mt-1 -mb-0.5">Yatırımcı Sunumu İçin Öneriler</h2>
                <p class="whitespace-normal break-words"><strong>NPV Yorumu:</strong></p>
                <ul class="[&amp;:not(:last-child)_ul]:pb-1 [&amp;:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7">
                    <li class="whitespace-normal break-words">Pozitif NPV: Proje kabul edilebilir</li>
                    <li class="whitespace-normal break-words">Yüksek NPV: Güçlü değer yaratma potansiyeli</li>
                </ul>
                <p class="whitespace-normal break-words"><strong>IRR Analizi:</strong></p>
                <ul class="[&amp;:not(:last-child)_ul]:pb-1 [&amp;:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7">
                    <li class="whitespace-normal break-words">Sektör ortalaması: %20-40</li>
                    <li class="whitespace-normal break-words">Risk-free rate + risk primi olmalı</li>
                    <li class="whitespace-normal break-words">WACC'tan mutlaka yüksek olmalı</li>
                </ul>
                <p class="whitespace-normal break-words"><strong>ROI Beklentileri:</strong></p>
                <ul class="[&amp;:not(:last-child)_ul]:pb-1 [&amp;:not(:last-child)_ol]:pb-1 list-disc space-y-1.5 pl-7">
                    <li class="whitespace-normal break-words">Early stage: %200-500+</li>
                    <li class="whitespace-normal break-words">Growth stage: %50-200</li>
                    <li class="whitespace-normal break-words">Mature stage: %15-50</li>
                </ul>
            </div>
        </div>

    </div>

    <script>
        function calculateMetrics() {
            // Input değerlerini al
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value);
            const discountRate = parseFloat(document.getElementById('discountRate').value) / 100;
            const projectYears = parseInt(document.getElementById('projectYears').value);
            const firstYearRevenue = parseFloat(document.getElementById('firstYearRevenue').value);
            const revenueGrowthRate = parseFloat(document.getElementById('revenueGrowthRate').value) / 100;
            const grossMargin = parseFloat(document.getElementById('grossMargin').value) / 100;
            const monthlyFixedCosts = parseFloat(document.getElementById('monthlyFixedCosts').value);
            const marketingBudget = parseFloat(document.getElementById('marketingBudget').value);
            const marketModel = document.getElementById('marketModel').value;

            // Pazar modeline göre ayarlamalar
            let growthMultiplier = 1;
            let marginAdjustment = 0;

            switch (marketModel) {
                case 'conservative':
                    growthMultiplier = 0.7;
                    marginAdjustment = -0.05;
                    break;
                case 'moderate':
                    growthMultiplier = 1;
                    marginAdjustment = 0;
                    break;
                case 'aggressive':
                    growthMultiplier = 1.3;
                    marginAdjustment = 0.05;
                    break;
            }

            // Nakit akışlarını hesapla
            let cashFlows = [-initialInvestment];
            let cumulativeNPV = [-initialInvestment];
            let totalNetCashFlow = -initialInvestment;

            for (let year = 1; year <= projectYears; year++) {
                // Gelir hesaplama (azalan büyüme oranı ile)
                const adjustedGrowthRate = revenueGrowthRate * Math.pow(0.85, year - 1) * growthMultiplier;
                const revenue = firstYearRevenue * Math.pow(1 + adjustedGrowthRate, year);

                // Gider hesaplama
                const grossProfit = revenue * (grossMargin + marginAdjustment);
                const fixedCosts = monthlyFixedCosts * 12;
                const marketingCosts = marketingBudget * (1 + 0.1 * year); // Artan pazarlama giderleri
                const totalExpenses = fixedCosts + marketingCosts + (revenue * 0.1); // %10 değişken gider

                const netCashFlow = grossProfit - totalExpenses;
                cashFlows.push(netCashFlow);

                // İndirgeli nakit akışı
                const discountedCashFlow = netCashFlow / Math.pow(1 + discountRate, year);
                const cumNPV = cumulativeNPV[cumulativeNPV.length - 1] + discountedCashFlow;
                cumulativeNPV.push(cumNPV);

                totalNetCashFlow += netCashFlow;
            }

            // NPV hesaplama
            let npv = 0;
            for (let i = 1; i < cashFlows.length; i++) {
                npv += cashFlows[i] / Math.pow(1 + discountRate, i);
            }
            npv -= initialInvestment;

            // IRR hesaplama (Newton-Raphson yöntemi)
            let irr = calculateIRR(cashFlows);

            // ROI hesaplama
            const roi = (totalNetCashFlow / initialInvestment) * 100;

            // Payback Period hesaplama
            let paybackPeriod = calculatePaybackPeriod(cashFlows);

            // Sonuçları göster
            displayResults(npv, irr, roi, paybackPeriod, cashFlows, cumulativeNPV, discountRate, initialInvestment, monthlyFixedCosts, marketingBudget);
        }

        function calculateIRR(cashFlows) {
            let rate = 0.1; // Başlangıç tahmini %10
            let tolerance = 0.0001;
            let maxIterations = 100;

            for (let i = 0; i < maxIterations; i++) {
                let npv = 0;
                let dnpv = 0; // NPV'nin türevi

                for (let j = 0; j < cashFlows.length; j++) {
                    npv += cashFlows[j] / Math.pow(1 + rate, j);
                    dnpv += -j * cashFlows[j] / Math.pow(1 + rate, j + 1);
                }

                if (Math.abs(npv) < tolerance) break;

                rate = rate - npv / dnpv;

                if (rate < -0.99) rate = -0.99; // Alt sınır
                if (rate > 10) rate = 10; // Üst sınır
            }

            return rate * 100;
        }

        function calculatePaybackPeriod(cashFlows) {
            let cumulativeCashFlow = cashFlows[0];

            for (let i = 1; i < cashFlows.length; i++) {
                if (cumulativeCashFlow < 0) {
                    cumulativeCashFlow += cashFlows[i];
                    if (cumulativeCashFlow >= 0) {
                        // Doğrusal interpolasyon
                        const previousCumulative = cumulativeCashFlow - cashFlows[i];
                        const payback = i - 1 + (-previousCumulative / cashFlows[i]);
                        return payback;
                    }
                }
            }
            return -1; // Payback olmamış
        }

        function displayResults(npv, irr, roi, paybackPeriod, cashFlows, cumulativeNPV, discountRate, initialInvestment, monthlyFixedCosts, marketingBudget) {
            // NPV gösterimi
            document.getElementById('npvValue').textContent = formatCurrency(npv);
            document.getElementById('npvValue').className = 'metric-value ' + (npv > 0 ? 'positive' : 'negative');
            document.getElementById('npvDescription').textContent = npv > 0 ? 'Karlı proje' : 'Zararlı proje';

            // IRR gösterimi
            document.getElementById('irrValue').textContent = irr.toFixed(1) + '%';
            document.getElementById('irrValue').className = 'metric-value ' + (irr > discountRate * 100 ? 'positive' : 'negative');
            document.getElementById('irrDescription').textContent = irr > discountRate * 100 ? 'WACC\'tan yüksek' : 'WACC\'tan düşük';

            // ROI gösterimi
            document.getElementById('roiValue').textContent = roi.toFixed(1) + '%';
            document.getElementById('roiValue').className = 'metric-value ' + (roi > 0 ? 'positive' : 'negative');
            document.getElementById('roiDescription').textContent = roi > 0 ? 'Pozitif getiri' : 'Negatif getiri';

            // Payback Period gösterimi
            if (paybackPeriod > 0) {
                const years = Math.floor(paybackPeriod);
                const months = Math.round((paybackPeriod - years) * 12);
                document.getElementById('paybackValue').textContent = years + '.' + months + ' yıl';
                document.getElementById('paybackValue').className = 'metric-value positive';
            } else {
                document.getElementById('paybackValue').textContent = 'Yok';
                document.getElementById('paybackValue').className = 'metric-value negative';
            }

            // Nakit akış tablosunu oluştur
            const tbody = document.getElementById('cashFlowBody');
            tbody.innerHTML = '';

            for (let i = 0; i < cashFlows.length; i++) {
                const row = tbody.insertRow();
                const year = i === 0 ? 0 : i;

                if (i === 0) {
                    // Başlangıç yatırımı satırı
                    row.innerHTML = `
                            <td>0</td>
                            <td>-</td>
                            <td>${formatCurrency(initialInvestment)}</td>
                            <td class="negative">${formatCurrency(cashFlows[i])}</td>
                            <td class="negative">${formatCurrency(cashFlows[i])}</td>
                            <td class="negative">${formatCurrency(cumulativeNPV[i])}</td>
                        `;
                } else {
                    // Operasyonel yıllar
                    const revenue = calculateYearlyRevenue(i);
                    const expenses = calculateYearlyExpenses(i, revenue, monthlyFixedCosts, marketingBudget);
                    const netCashFlow = cashFlows[i];
                    const discountedCashFlow = netCashFlow / Math.pow(1 + discountRate, i);

                    row.innerHTML = `
                            <td>${year}</td>
                            <td class="positive">${formatCurrency(revenue)}</td>
                            <td class="negative">${formatCurrency(expenses)}</td>
                            <td class="${netCashFlow > 0 ? 'positive' : 'negative'}">${formatCurrency(netCashFlow)}</td>
                            <td class="${discountedCashFlow > 0 ? 'positive' : 'negative'}">${formatCurrency(discountedCashFlow)}</td>
                            <td class="${cumulativeNPV[i] > 0 ? 'positive' : 'negative'}">${formatCurrency(cumulativeNPV[i])}</td>
                        `;
                }
            }

            document.getElementById('results').style.display = 'block';
        }

        function calculateYearlyRevenue(year) {
            const firstYearRevenue = parseFloat(document.getElementById('firstYearRevenue').value);
            const revenueGrowthRate = parseFloat(document.getElementById('revenueGrowthRate').value) / 100;
            const marketModel = document.getElementById('marketModel').value;

            let growthMultiplier = 1;
            switch (marketModel) {
                case 'conservative': growthMultiplier = 0.7; break;
                case 'moderate': growthMultiplier = 1; break;
                case 'aggressive': growthMultiplier = 1.3; break;
            }

            const adjustedGrowthRate = revenueGrowthRate * Math.pow(0.85, year - 1) * growthMultiplier;
            return firstYearRevenue * Math.pow(1 + adjustedGrowthRate, year);
        }

        function calculateYearlyExpenses(year, revenue, monthlyFixedCosts, marketingBudget) {
            const grossMargin = parseFloat(document.getElementById('grossMargin').value) / 100;
            const cogs = revenue * (1 - grossMargin);
            const fixedCosts = monthlyFixedCosts * 12;
            const marketingCosts = marketingBudget * (1 + 0.1 * year);
            const variableCosts = revenue * 0.1;

            return cogs + fixedCosts + marketingCosts + variableCosts;
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('tr-TR', {
                style: 'currency',
                currency: 'TRY',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }

        // Sayfa yüklendiğinde örnek hesaplama yap
        window.onload = function () {
            calculateMetrics();
        };
    </script>
</body>
</html>